# datasource
构建获取网络数据的应用，并将获得的数据保存起来，以便下一步进行分析处理

1.描述
    该应用是本人手写的一个爬虫程序,使用的是jsoup api对网页进行解析,旨在能够下载新闻网站的网页文件,并为后续的大数据分析提供资料.

2.使用
    该应用已经完成一部分功能,叫做网络爬虫,专门爬取网络上的html文本资源.

使用本应用前需要对应用进行配置,本应用的配置文件是env.properties文件,配置的参数如下:

savepath=/home/crawler_out/  #表示下载的网页文本文件存放的目录
maxdepth=5                   #表示下载链接的深度
threadNum=8                  #表示应用使用过程中开启的线程数
urls=https://www.sina.com.cn/#表示应用下载的网站的网址,可以是多个网址,但是需要用;隔开

3.存在问题
    在使用过程中,发现有main进程传给线程的对象参数与线程中的参数不是同一个对象,在改变对象中的参数时无法改变main进程中的对应参数,导致程序运行结果不符合要求,这让我对引用传递传递的是地址产生了怀疑.现在正在测试并完善.了解了jmm后，发现线程的工作内存和主内存不是一个东西，每个线程都有一个隔离的工作内存，主内存是所有线程贡献的，而main方法传递给线程的参数就是将参数从主内存中拷贝到工作内存中，所以不是同一个变量。解决的办法是让变量具有可见性，使用voliate和synchronice，让变量具有可见性。

---------------------------------------更新描述---------------------------------

加入了爬取东方财富网热门博主博客的功能，获取博客的链接、作者、名称信息；
增加了定时器quartz的功能，定时获取博客信息；

--------------------------------------2019年3月11日更新--------------------

增加mongodb数据库操作的支持,加入了爬取东方财富主力流入数据功能并保存的功能

--------------------------------------2019年3月13日更新--------------------

增加爬取东方财富主力资金流入，个股资金流入功能，并保存到数据库

--------------------------------------2019年3月15日更新--------------------

增加获取公司评级和行业板块资金流入功能

--------------------------------------2019年3月16日更新--------------------

使用springboot重构整个项目代码;
mongodb也使用mongodbTemplate来连接数据库,不再使用jdbc.
在重构过程中,遇到较多问题,主要是定时器的整合上,由于刚开始使用的是springboot1.5,整合了quartz2.2后发现无法注入service服务,导致定时任务中所有的service都为空,报空指针错误.经过不断研究,使用springboot2.0版本的方式创建了一个项目,并配置好定时器,在改项目上是可以运行的,定时器能够正常运作.结果在引入到本项目中,由于原来本项目使用的springboot1.5版本,定时任务一直都不执行,但是又没报错,发现maven依赖中无法找到quartz包,最后就知道了是springboot的版本问题,修改好了版本后,定时任务就能正常执行了.
